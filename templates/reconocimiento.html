{% extends 'base.html' %}
{% block title %}CONEI{% endblock %}

{% block content %}
<div class="card border-0 shadow-sm rounded-4 mb-4">
  <div class="card-body px-4 py-3">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">

      <!-- Título -->
      <div class="d-flex align-items-center gap-3">
        <div class="bg-primary bg-opacity-10 rounded-circle p-3">
          <i class="fa-solid fa-book text-primary fs-4"></i>
        </div>

        <div>
          <h2 class="fw-bold mb-0 lh-1">
            Libro de Registro
          </h2>
          <small class="text-muted">
            Consejo Educativo Institucional (CONEI)
          </small>
        </div>
      </div>

      <!-- Año -->
      <div class="text-end">
        <span class="badge rounded-pill bg-primary fs-6 px-4 py-2">
          <i class="fa-regular fa-calendar me-1"></i>
          {{ anio_actual }}
        </span>
      </div>

    </div>
  </div>
</div>


<div class="card border-0 shadow-sm rounded-4 mt-4">
  <div class="card-body p-4">

    <div class="table-responsive">
      <table id="tablaIE" class="table align-middle mb-0">

        <thead class="table-primary text-center small text-uppercase">
          <tr>
            <th class="text-center" style="width:50px">#</th>
            <th class="text-center">Código Local</th>
            <th class="text-start">Institución Educativa</th>
            <th class="text-center">Estado</th>
            <th class="text-center" style="width:100px">Acción</th>
          </tr>
        </thead>

        <tbody>
          {% for ie in datos %}
          <tr>

            <td class="text-center text-muted fw-semibold"> 
              {{ loop.index }}
            </td>

            <td class="text-center">
              <span class="badge bg-light text-dark border">
                {{ ie.codigo_local }}
              </span>
            </td>

            <td>
              {{ modalidad_map.get(ie.modalidad, ie.modalidad) }}
              <span>
                {{ ie.institucion_educativa }}
              </span>
            </td>

            {% set estado_class = {
              'Validado': 'bg-success',
              'Observado': 'bg-warning text-dark'
            }.get(ie.estado, 'bg-danger') %}
            <td class="text-center">
              <span class="badge rounded-pill px-3 {{ estado_class }}">
                {{ ie.estado }}
              </span>
            </td>

            <td class="text-center">
              <a href="{{ url_for('detalle_ie.detalle_ie', datos_ie_id=ie.id) }}"
                class="btn btn-outline-primary btn-sm rounded-circle"
                aria-label="Ver detalle">
                <i class="fa-solid fa-book-open"></i>
              </a>
            </td>

          </tr>
          {% endfor %}
        </tbody>

      </table>
    </div>

  </div>
</div>

{% endblock %}